name: Release and Publish

on:
  workflow_dispatch:
    inputs:
      release_type:
        description: 'Release type'
        required: true
        default: 'patch'
        type: choice
        options: [patch, minor, major, manual]
      custom_version:
        description: 'Custom version (if manual)'
        required: false

jobs:
  call-reusable-release:
    uses: ai-pipestream/.github/.github/workflows/reusable-service-release.yml@main
    with:
      release_type: ${{ inputs.release_type }}
      custom_version: ${{ inputs.custom_version }}
      docker-image-name: opensearch-manager
      maven-artifact-id: opensearch-manager
      dockerfile-path: src/main/docker/Dockerfile.jvm
    secrets: inherit
