%test.quarkus.devservices.enabled=true
%test.quarkus.compose.devservices.files=src/test/resources/compose-test-services.yml
%test.quarkus.compose.devservices.start-services=true
%test.quarkus.compose.devservices.project-name=pipeline-test-services
%test.quarkus.compose.devservices.stop-services=false
%test.quarkus.compose.devservices.reuse-project-for-tests=true
%test.quarkus.compose.devservices.stop-timeout=30s

# Disable individual devservices (compose provides everything)
%test.quarkus.datasource.devservices.enabled=false
%test.quarkus.kafka.devservices.enabled=false

# Test Kafka and Apicurio config
%test.kafka.bootstrap.servers=${TEST_KAFKA_HOST:localhost}:${TEST_KAFKA_PORT:9095}
%test.mp.messaging.connector.smallrye-kafka.bootstrap.servers=${TEST_KAFKA_HOST:localhost}:${TEST_KAFKA_PORT:9095}
%test.mp.messaging.connector.smallrye-kafka.apicurio.registry.url=http://${TEST_APICURIO_HOST:localhost}:${TEST_APICURIO_PORT:8082}/apis/registry/v3

# Test outgoing channel for drive-updates - extension auto-configures serializer for Protobuf types
%test.mp.messaging.outgoing.drive-updates-out.connector=smallrye-kafka
%test.mp.messaging.outgoing.drive-updates-out.topic=drive-updates

# Test incoming channels - extension auto-configures deserializers (no explicit config needed)

# OpenSearch test configuration
%test.opensearch.hosts=${TEST_OPENSEARCH_HOST:localhost}:${TEST_OPENSEARCH_PORT:9201}

# Test HTTP configuration
%test.quarkus.http.test-port=0

# Disable service registration in tests
%test.pipestream.registration.enabled=false

# Enable debug logging for ConfigSource to trace extension behavior
%test.quarkus.log.category."ai.pipestream.apicurio.registry.protobuf.runtime.ProtobufChannelConfigSource".level=DEBUG

# gRPC mocks are provided by pipestream-wiremock-server via WireMockTestResource